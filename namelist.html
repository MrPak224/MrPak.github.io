<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>32 Student Counters with Homework Tracking</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        .counter-container { 
            display: inline-block; 
            width: 220px; 
            margin: 10px; 
            padding: 10px; 
            border: 1px solid #ccc; 
            border-radius: 5px;
            position: relative;
        }
        .name { font-weight: bold; margin-bottom: 5px; }
        .portfolio-pic { 
            width: 100px; 
            height: 100px; 
            background-color: #ddd; 
            margin: 0 auto 10px; 
            display: flex; 
            align-items: center; 
            justify-content: center;
        }
        .number { font-size: 24px; margin: 10px 0; }
        button { font-size: 14px; margin: 0 5px; }
        .homework-missing {
            background-color: #ffcccc;
        }
        .homework-status {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <h1>32 Student Counters with Homework Tracking</h1>
    <div id="counters-container"></div>

    <script>
        const names = [
            "Alice", "Bob", "Charlie", "David", "Eve", "Frank", "Grace", "Henry",
            "Ivy", "Jack", "Kate", "Liam", "Mia", "Noah", "Olivia", "Peter",
            "Quinn", "Rachel", "Sam", "Tina", "Uma", "Victor", "Wendy", "Xander",
            "Yara", "Zack", "Anna", "Ben", "Chloe", "Dan", "Emma", "Finn"
        ];

        function createCounter(name, index) {
            const container = document.createElement('div');
            container.className = 'counter-container';
            container.id = `container-${index}`;
            container.innerHTML = `
                <div class="name">${name}</div>
                <div class="portfolio-pic">Photo</div>
                <div class="number" id="number-${index}">Loading...</div>
                <button onclick="changeNumber(${index}, -1)">-1</button>
                <button onclick="changeNumber(${index}, 1)">+1</button>
                <button onclick="toggleHomework(${index})">Toggle Homework</button>
                <span class="homework-status" id="homework-${index}"></span>
            `;
            return container;
        }

        function loadNumber(index) {
            const urlParams = new URLSearchParams(window.location.search);
            const savedCounter = urlParams.get(`counter-${index}`);
            return savedCounter === null ? 50 : parseInt(savedCounter, 10);
        }

        function updateDisplay(index, value) {
            document.getElementById(`number-${index}`).textContent = value;
        }

        function changeNumber(index, amount) {
            const currentValue = loadNumber(index);
            const newValue = currentValue + amount;
            updateDisplay(index, newValue);
            updateURL(index, newValue);
        }

        function updateURL(index, value) {
            const newUrl = new URL(window.location.href);
            newUrl.searchParams.set(`counter-${index}`, value);
            window.history.pushState({}, '', newUrl);
        }

        function toggleHomework(index) {
            const container = document.getElementById(`container-${index}`);
            const homeworkStatus = document.getElementById(`homework-${index}`);
            if (container.classList.contains('homework-missing')) {
                container.classList.remove('homework-missing');
                homeworkStatus.textContent = '';
            } else {
                container.classList.add('homework-missing');
                homeworkStatus.textContent = '❗';
            }
            saveHomeworkStatus(index, container.classList.contains('homework-missing'));
        }

        function saveHomeworkStatus(index, isMissing) {
            const newUrl = new URL(window.location.href);
            if (isMissing) {
                newUrl.searchParams.set(`homework-${index}`, 'missing');
            } else {
                newUrl.searchParams.delete(`homework-${index}`);
            }
            window.history.pushState({}, '', newUrl);
        }

        function loadHomeworkStatus(index) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(`homework-${index}`) === 'missing';
        }

        window.onload = function() {
            const countersContainer = document.getElementById('counters-container');
            names.forEach((name, index) => {
                countersContainer.appendChild(createCounter(name, index));
                const initialValue = loadNumber(index);
                updateDisplay(index, initialValue);
                if (loadHomeworkStatus(index)) {
                    toggleHomework(index);
                }
            });
        };
    </script>
</body>
</html>